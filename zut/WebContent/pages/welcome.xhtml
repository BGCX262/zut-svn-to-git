<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:x="http://myfaces.apache.org/tomahawk"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui">

<ui:composition template="template.xhtml">
	<ui:param name="param" value="List of items" />

	<ui:define name="title">
		<h:outputText value="Items" />
	</ui:define>

	<ui:define name="body">
		<h:form>
         <table>
             <tr>
                <td>
                	<h:outputLabel for="role" value="Role : " />
                </td>
                <td>
                	<p:selectOneMenu id="role" value="#{userMB.role}">  
		                <f:selectItem itemLabel="Select role" itemValue="" />  
		                <f:selectItems value="#{userMB.roles}" />  
		                <!-- <p:ajax update="secondSelect" listener="#{userMB.handleRoleChange}" /> -->
		              	<p:ajax listener="#{userMB.handleRoleChange}" />    
		            </p:selectOneMenu>  
            
                
                    <p:message id="idMsg" for="role" display="icon"/>
                </td>
             </tr>
             <tr>
                <td><h:outputLabel for="name" value="Name : " /></td>
                <td><p:inputText id="name" value="#{userMB.name}">
                        <f:validateLength minimum="2" />
                        <p:ajax event="blur" update="nameMsg" />
                    </p:inputText>
                    <p:message id="nameMsg" for="name" display="icon"/>
                </td>
             </tr>
             <tr>
                <td><h:outputLabel for="surname" value="Surname : " /></td>
                <td><p:inputText id="surname" value="#{userMB.surname}">
                        <f:validateLength minimum="2" />
                        <p:ajax event="blur" update="surnameMsg" />
                    </p:inputText>
                    <p:message id="surnameMsg" for="surname" display="icon"/>
                </td>
             </tr>
             <tr>
                <td><p:commandButton id="addUser" value="Add" action="#{userMB.addUser}" ajax="false"/></td>
                <td><p:commandButton id="reset" value="Reset" action="#{userMB.reset}" ajax="false"/></td>
             </tr>
         </table>
     </h:form>
	</ui:define>
	</ui:composition>
</html>